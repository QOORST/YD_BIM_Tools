<Window x:Class="AR_AutoAvoidRouting.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="步驟 3/3: 設定避讓參數" Height="400" Width="500" 
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        Background="#F5F5F5">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 標題區 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,15">
            <TextBlock Text="避讓參數設定" FontSize="18" FontWeight="Bold" Foreground="#333"/>
            <TextBlock Text="設定淨空距離、偏移量和避讓方向" FontSize="12" Foreground="#666" Margin="0,5,0,0"/>
        </StackPanel>

        <!-- 設定區 -->
        <Border Grid.Row="1" Background="White" CornerRadius="8" Padding="15" 
                BorderBrush="#DDD" BorderThickness="1">
            <StackPanel>
                <!-- 基本參數 -->
                <TextBlock Text="基本參數" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="50"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="35"/>
                        <RowDefinition Height="35"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="兩側淨空" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding ClearanceMm}" Grid.Row="0" Grid.Column="1" 
                             VerticalAlignment="Center" Padding="5" Height="28"/>
                    <TextBlock Text="mm" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" Margin="5,0,0,0"/>

                    <TextBlock Text="額外偏移" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding ExtraOffsetMm}" Grid.Row="1" Grid.Column="1" 
                             VerticalAlignment="Center" Padding="5" Height="28"/>
                    <TextBlock Text="mm" Grid.Row="1" Grid.Column="2" VerticalAlignment="Center" Margin="5,0,0,0"/>
                </Grid>

                <!-- 避讓方向 -->
                <TextBlock Text="避讓方向" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                <ComboBox SelectedIndex="0" Margin="0,0,0,15" Height="32" Padding="8"
                          SelectedValue="{Binding Direction, Mode=TwoWay}"
                          SelectedValuePath="Tag">
                    <ComboBoxItem Content="自動選擇（推薦）" Tag="Auto"/>
                    <ComboBoxItem Content="往上避讓" Tag="Up"/>
                    <ComboBoxItem Content="往下避讓" Tag="Down"/>
                    <ComboBoxItem Content="往左避讓" Tag="Left"/>
                    <ComboBoxItem Content="往右避讓" Tag="Right"/>
                    <ComboBoxItem Content="垂直翻彎（類似 Dynamo）" Tag="VerticalFlip"/>
                </ComboBox>

                <!-- 進階選項 -->
                <TextBlock Text="進階選項" FontWeight="Bold" FontSize="14" Margin="0,5,0,10"/>
                <CheckBox Content="啟用路徑驗證（確保新路徑無衝突）" 
                          IsChecked="{Binding EnablePathValidation}" Margin="0,0,0,8"/>
                <CheckBox Content="僅預覽路徑（不實際修改管線）" 
                          IsChecked="{Binding PreviewOnly}"/>
            </StackPanel>
        </Border>

        <!-- 按鈕區 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="取消" Width="100" Height="35" Margin="0,0,10,0" 
                    Click="Cancel_Click" Background="#E0E0E0"/>
            <Button Content="開始避讓" Width="120" Height="35" IsDefault="True" 
                    Click="Ok_Click" Background="#4CAF50" Foreground="White" FontWeight="Bold"/>
        </StackPanel>
    </Grid>
</Window>