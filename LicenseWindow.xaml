<!-- LicenseWindow.xaml -->
<Window x:Class="YD_RevitTools.LicenseManager.UI.LicenseWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="YD_BIM Tools - License Management" Height="580" Width="680"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize">
    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 標題區域 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                <Viewbox Width="32" Height="32" Margin="0,0,10,0">
                    <Canvas Width="24" Height="24">
                        <Path Fill="#2196F3" Data="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"/>
                    </Canvas>
                </Viewbox>
                <TextBlock Text="授權管理" FontSize="28" FontWeight="Bold" VerticalAlignment="Center"/>
            </StackPanel>
            <TextBlock Text="YD_BIM Tools - Revit 2024/2025/2026 Multi-Version BIM Tools"
                       Foreground="#666" FontSize="12"/>
        </StackPanel>

        <!-- 頁籤內容 -->
        <TabControl Grid.Row="1" Padding="0">
            <!-- 授權狀態頁籤 -->
            <TabItem Header="授權狀態" FontSize="13">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel>
                        <!-- 狀態資訊卡片 -->
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" 
                                Background="#F9F9F9" CornerRadius="8" Padding="20" Margin="0,10,0,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="140"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- 狀態 -->
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="狀態：" 
                                          FontWeight="Bold" VerticalAlignment="Center"/>
                                <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
                                    <Ellipse x:Name="statusIndicator" Width="12" Height="12" 
                                            Fill="Green" Margin="0,0,8,0"/>
                                    <TextBlock x:Name="txtStatus" Text="已啟用" 
                                              Foreground="Green" FontWeight="Bold"/>
                                </StackPanel>

                                <!-- 授權類型 -->
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="授權類型：" 
                                          FontWeight="Bold" Margin="0,12,0,0"/>
                                <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="0,12,0,0">
                                    <TextBlock x:Name="txtLicenseType" Text="專業版" FontWeight="SemiBold"/>
                                    <Border x:Name="licenseTypeBadge" 
                                           Background="#4CAF50" 
                                           CornerRadius="10" 
                                           Padding="8,2" 
                                           Margin="10,0,0,0">
                                        <TextBlock x:Name="txtLicenseTypeBadge" 
                                                  Text="365天" 
                                                  Foreground="White" 
                                                  FontSize="11" 
                                                  FontWeight="Bold"/>
                                    </Border>
                                </StackPanel>

                                <!-- 使用者 -->
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="使用者：" 
                                          FontWeight="Bold" Margin="0,12,0,0"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" x:Name="txtUserName" 
                                          Text="Owen" Margin="0,12,0,0"/>

                                <!-- 公司 -->
                                <TextBlock Grid.Row="3" Grid.Column="0" Text="公司：" 
                                          FontWeight="Bold" Margin="0,12,0,0"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" x:Name="txtCompany" 
                                          Text="YD" Margin="0,12,0,0"/>

                                <!-- 啟用日期 -->
                                <TextBlock Grid.Row="4" Grid.Column="0" Text="啟用日期：" 
                                          FontWeight="Bold" Margin="0,12,0,0"/>
                                <TextBlock Grid.Row="4" Grid.Column="1" x:Name="txtStartDate" 
                                          Text="2025-11-05" Margin="0,12,0,0"/>

                                <!-- 到期日期 -->
                                <TextBlock Grid.Row="5" Grid.Column="0" Text="到期日期：" 
                                          FontWeight="Bold" Margin="0,12,0,0"/>
                                <StackPanel Grid.Row="5" Grid.Column="1" Orientation="Horizontal" Margin="0,12,0,0">
                                    <TextBlock x:Name="txtExpiryDate" Text="2026-11-05"/>
                                    <TextBlock x:Name="txtDaysRemaining" 
                                              Text="(剩餘 365 天)" 
                                              Foreground="#666" 
                                              Margin="10,0,0,0"/>
                                </StackPanel>

                                <!-- 機器碼 -->
                                <TextBlock Grid.Row="6" Grid.Column="0" Text="機器碼：" 
                                          FontWeight="Bold" Margin="0,12,0,0"/>
                                <StackPanel Grid.Row="6" Grid.Column="1" Orientation="Horizontal" Margin="0,12,0,0">
                                    <TextBlock x:Name="txtMachineCode" Text="-" 
                                              FontFamily="Consolas" Foreground="#666"/>
                                    <Button Content="複製" Width="60" Height="24" 
                                           Margin="10,0,0,0" Padding="5,2"
                                           Click="BtnCopyMachineCode_Click"/>
                                </StackPanel>

                                <!-- 授權金鑰 -->
                                <TextBlock Grid.Row="7" Grid.Column="0" Text="授權金鑰：" 
                                          FontWeight="Bold" Margin="0,12,0,0"/>
                                <TextBlock Grid.Row="7" Grid.Column="1" x:Name="txtLicenseKeyDisplay" 
                                          Text="-" 
                                          FontFamily="Consolas" 
                                          FontSize="10"
                                          Foreground="#999"
                                          TextWrapping="Wrap"
                                          Margin="0,12,0,0"/>
                            </Grid>
                        </Border>

                        <!-- 授權訊息顯示 -->
                        <Border x:Name="licenseMessageBorder" 
                                BorderBrush="#FFA726" BorderThickness="1" 
                                Background="#FFF3E0" CornerRadius="5" 
                                Padding="15" Margin="0,15,0,0"
                                Visibility="Collapsed">
                            <StackPanel>
                                <TextBlock x:Name="txtLicenseMessage" 
                                          TextWrapping="Wrap" 
                                          Foreground="#E65100"
                                          FontWeight="SemiBold"/>
                            </StackPanel>
                        </Border>

                        <!-- 功能權限說明 -->
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" 
                                Background="White" CornerRadius="5" 
                                Padding="15" Margin="0,15,0,0">
                            <StackPanel>
                                <TextBlock Text="授權功能說明" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                                <StackPanel x:Name="featureList">
                                    <!-- 功能清單將在代碼中動態生成 -->
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 啟用授權頁籤 -->
            <TabItem Header="啟用授權" FontSize="13">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel Margin="10">
                        <TextBlock Text="請輸入授權金鑰：" FontWeight="Bold" Margin="0,0,0,10"/>
                        <TextBox x:Name="txtLicenseKey" 
                                Height="120" 
                                TextWrapping="Wrap" 
                                AcceptsReturn="True"
                                VerticalScrollBarVisibility="Auto"
                                FontFamily="Consolas"
                                Padding="8"/>

                        <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                            <Button Content="啟用授權" Width="100" Height="35" 
                                   Background="#4CAF50" Foreground="White"
                                   Click="BtnActivate_Click"/>
                            <Button Content="清除" Width="80" Height="35" 
                                   Click="BtnClear_Click"/>
                        </StackPanel>

                        <Separator Margin="0,20"/>

                        <TextBlock Text="授權類型說明：" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>

                        <!-- 試用版 -->
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" 
                                Background="#F5F5F5" CornerRadius="5" 
                                Padding="15" Margin="0,5">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="試用版" FontWeight="Bold" FontSize="13"/>
                                    <Border Background="#FF9800" CornerRadius="3" 
                                           Padding="5,2" Margin="10,0,0,0">
                                        <TextBlock Text="30 天" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                    </Border>
                                </StackPanel>
                                <TextBlock Text="• 基本功能體驗" Margin="0,5,0,2"/>
                                <TextBlock Text="• 適合評估和測試使用" Margin="0,2"/>
                            </StackPanel>
                        </Border>

                        <!-- 標準版 -->
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" 
                                Background="#F5F5F5" CornerRadius="5" 
                                Padding="15" Margin="0,5">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="標準版" FontWeight="Bold" FontSize="13"/>
                                    <Border Background="#2196F3" CornerRadius="3" 
                                           Padding="5,2" Margin="10,0,0,0">
                                        <TextBlock Text="365 天" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                    </Border>
                                </StackPanel>
                                <TextBlock Text="• 包含所有基本功能" Margin="0,5,0,2"/>
                                <TextBlock Text="• 標準技術支援" Margin="0,2"/>
                                <TextBlock Text="• 適合一般專案使用" Margin="0,2"/>
                            </StackPanel>
                        </Border>

                        <!-- 專業版 -->
                        <Border BorderBrush="#E0E0E0" BorderThickness="1" 
                                Background="#F5F5F5" CornerRadius="5" 
                                Padding="15" Margin="0,5">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="專業版" FontWeight="Bold" FontSize="13"/>
                                    <Border Background="#4CAF50" CornerRadius="3" 
                                           Padding="5,2" Margin="10,0,0,0">
                                        <TextBlock Text="365 天" Foreground="White" FontSize="10" FontWeight="Bold"/>
                                    </Border>
                                </StackPanel>
                                <TextBlock Text="• 包含所有功能" Margin="0,5,0,2"/>
                                <TextBlock Text="• 優先技術支援" Margin="0,2"/>
                                <TextBlock Text="• 進階功能與自訂選項" Margin="0,2"/>
                                <TextBlock Text="• 適合大型專案和企業使用" Margin="0,2"/>
                            </StackPanel>
                        </Border>

                        <TextBlock Text="如需獲取授權金鑰，請聯繫技術支援。" 
                                  Foreground="#666" Margin="0,15,0,0" FontSize="12"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 說明頁籤 -->
            <TabItem Header="說明" FontSize="13">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel Margin="10">
                        <TextBlock FontWeight="Bold" FontSize="15" Margin="0,0,0,10">
                            使用說明
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,5">
                            <Run Text="1. 統一授權管理" FontWeight="Bold"/>
                            <LineBreak/>
                            This license management system manages all YD_BIM Tools. One license can be used for all tools in the same tab.
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,10">
                            <Run Text="2. 授權類型" FontWeight="Bold"/>
                            <LineBreak/>
                            • 試用版：30 天試用期限，包含基本功能
                            <LineBreak/>
                            • 標準版：365 天授權，包含標準功能
                            <LineBreak/>
                            • 專業版：365 天授權，包含所有進階功能
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,10">
                            <Run Text="3. 授權啟用" FontWeight="Bold"/>
                            <LineBreak/>
                            在「啟用授權」頁籤中輸入授權金鑰即可啟用。授權金鑰由技術支援提供。
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,10">
                            <Run Text="4. 授權到期提醒" FontWeight="Bold"/>
                            <LineBreak/>
                            • 試用版：到期前 7 天開始提醒
                            <LineBreak/>
                            • 標準版/專業版：到期前 30 天開始提醒
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,10">
                            <Run Text="5. 機器碼綁定" FontWeight="Bold"/>
                            <LineBreak/>
                            如需綁定機器授權，請將「授權狀態」頁面中的機器碼提供給技術支援。
                        </TextBlock>

                        <Separator Margin="0,20"/>

                        <TextBlock FontWeight="Bold" FontSize="15" Margin="0,10,0,10">
                            技術支援
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,5">
                            如有任何問題，請聯繫：
                            <LineBreak/>
                            Email: qoorst123456@gmail.com
                            <LineBreak/>
                            電話: 04-2376-1698
                            <LineBreak/>
                            網站: http://www.yesdir.com.tw
                        </TextBlock>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- 底部按鈕 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" 
                   HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="🔄 重新整理" Width="110" Height="35" 
                   Click="BtnRefresh_Click"/>
            <Button Content="關閉" Width="90" Height="35" 
                   Click="BtnClose_Click"/>
        </StackPanel>
    </Grid>
</Window>