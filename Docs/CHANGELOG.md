# 更新日誌

所有重要的專案變更都會記錄在此檔案中。

格式基於 [Keep a Changelog](https://keepachangelog.com/zh-TW/1.0.0/)，
版本號遵循 [語義化版本](https://semver.org/lang/zh-TW/)。

---

## [2.2.3] - 2025-12-05

### 修復
- 🐛 **修復自動更新功能依賴項缺失問題**
  - 添加 System.Text.Json.dll 及其依賴項
  - 添加 System.Text.Encodings.Web.dll
  - 添加 System.Memory.dll
  - 添加 System.Buffers.dll
  - 添加 System.Runtime.CompilerServices.Unsafe.dll
  - 修復「無法載入檔案或組件」錯誤

- 🐛 **修復「值不能為 null」錯誤**
  - 添加 HTTP 回應空值檢查
  - 添加 JSON 反序列化結果檢查
  - 添加版本號欄位空值檢查
  - 添加版本號解析異常處理

### 改進
- 🔨 **全面改進錯誤處理機制**
  - 添加 5 層防禦性檢查
  - 分類處理不同類型的異常
  - 提供詳細的診斷資訊
  - 改進錯誤訊息的可讀性

- 🔨 **優化異常處理**
  - 專門處理 HttpRequestException（網路連線失敗）
  - 專門處理 TaskCanceledException（連線超時）
  - 專門處理 JsonException（格式錯誤）
  - 顯示異常類型和內部異常訊息

- 🔨 **改進使用者提示**
  - 提供具體的檢查項目清單
  - 說明可能的原因
  - 提供解決建議
  - 幫助使用者自行診斷問題

---

## [2.2.0] - 2025-12-05

### 新增
- ✨ **自動更新功能** - 一鍵檢查並安裝最新版本
  - 自動檢查最新版本
  - 自動下載並安裝更新
  - 顯示更新內容和發布日期
  - 支援 HTTPS 加密傳輸
  - 超時保護和錯誤處理

- ✨ **管線避讓工具** - 自動生成管線避讓路徑
  - 支援 Pipe、Duct、Conduit
  - 可自訂彎角（30°-60°）和偏移量
  - 批量處理功能
  - 循環處理模式
  - 自動生成 6 點翻彎路徑

- 📚 **完整文檔**
  - 自動更新功能使用手冊（HTML）
  - 管線避讓工具使用手冊（HTML）
  - 部署自動更新伺服器指南
  - 文檔中心（index.html）

### 改進
- 🔨 優化 COBie 匯出性能
  - 提升大型專案的匯出速度
  - 改進記憶體使用效率

- 🔨 提升授權驗證速度
  - 優化授權檢查邏輯
  - 減少啟動時間

- 🔨 改進 UI 響應性能
  - 優化對話框載入速度
  - 改進按鈕響應時間

- 🔨 優化錯誤處理機制
  - 更詳細的錯誤訊息
  - 改進異常捕獲和處理

### 修復
- 🐛 修復管線套管放置問題
  - 修正套管中心點計算
  - 修正垂直放置角度
  - 改進交點檢測邏輯

- 🐛 修復連結模型元素識別
  - 修正連結模型中的元素類型判斷
  - 改進座標轉換

- 🐛 修復參數讀取錯誤
  - 修正空間名稱讀取
  - 改進參數值獲取

### 技術
- 📦 新增 NuGet 套件
  - System.Net.Http v4.3.4
  - System.Text.Json v8.0.5

- 🏗️ 架構改進
  - 新增 UpdateService 服務層
  - 新增 CheckUpdateCommand 命令
  - 整合 AboutCommand 更新檢查

---

## [2.1.0] - 2025-11-XX

### 新增
- ✨ **管線套管工具** - 自動為穿牆/穿樓板的管線放置套管
  - 支援連結模型
  - 自動編號系統
  - 距離測量功能
  - 智能套管尺寸選擇

### 改進
- 🔨 優化 COBie 匯出
  - 支援連結模型中的房間資訊
  - 改進空間名稱和代碼讀取

### 修復
- 🐛 修復圖標顯示問題
- 🐛 修復部署配置錯誤

---

## [2.0.0] - 2025-10-XX

### 新增
- ✨ **整合授權管理系統**
  - 三層授權等級（試用版、標準版、專業版）
  - 集中式授權驗證
  - 授權管理 UI

- ✨ **AR 模板工具**
  - 裝修模板快速建立
  - 參數滑桿視覺化調整

- ✨ **COBie 數據工具**
  - COBie 匯出功能
  - COBie 匯入功能
  - 欄位對應管理

### 改進
- 🔨 統一品牌名稱為 "YD_BIM Tools"
- 🔨 優化 Ribbon 面板佈局
- 🔨 改進圖標設計

### 技術
- 🏗️ 創建 Inno Setup 安裝程式
- 🏗️ 支援 Revit 2024 / 2025 / 2026
- 📦 整合多個獨立工具到單一專案

---

## [1.0.0] - 2025-09-XX

### 新增
- ✨ 初始版本發布
- ✨ 基本工具功能

---

## 版本說明

### 版本號格式：主版本號.次版本號.修訂號

- **主版本號**：重大變更，可能不向下相容
- **次版本號**：新增功能，向下相容
- **修訂號**：錯誤修復，向下相容

### 變更類型

- `新增` - 新功能
- `改進` - 現有功能的改進
- `修復` - 錯誤修復
- `移除` - 移除的功能
- `安全` - 安全性修復
- `技術` - 技術性變更（不影響使用者）

---

**© 2025 YD_BIM Owen. All rights reserved.**

